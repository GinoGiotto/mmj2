<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>EarleyParser</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: mmj.verify, class: EarleyParser">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">mmj.verify</a></div>
<h1 title="Class EarleyParser" class="title">Class EarleyParser</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">mmj.verify.EarleyParser</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="GrammaticalParser.html" title="interface in mmj.verify">GrammaticalParser</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">EarleyParser</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="GrammaticalParser.html" title="interface in mmj.verify">GrammaticalParser</a></span></div>
<div class="block">EarleyParser is my implementation of the Earley Parse algorithm, enhanced
 with Lookahead and various attempts at efficiency in Java.
 <p>
 The primary difference between this Earley Parser and the standard version is
 that input expressions are "pre-parsed" with variable hypotheses replacing
 the variables in the expression to be parsed. One reason for this change is
 that Var's and VarHyp's in Metamath are not necessarily in global scope;
 variable "x" might be a set now but later be a foobar. A drawback of this
 change is increased difficulty in building ParseTrees after EarleyParse
 finishes doing its "parse recognition" algorithm. Another drawback is that a
 restriction is placed on coding a grammatical Type Code, such as "wff" as a
 constant in a formula (ex. "xyz $a |- ( wff -> ph ) $." is prohibited because
 the "wff" is picked up as a something where a VarHyp should be...assuming the
 file that contains that statement uses "wff" as a Type Code.)
 <p>
 Another major change to the algorithm is that, while nulls and type
 conversions are handled in the mmj Grammar, a process of
 "combinatorial explosion" is used during the grammar-generation process, and
 so EarleyParser input "grammar" is solely the Notation Rules and unaltered
 VarHyp's. A grammar rule match to a subsequence of an expression may point to
 a Notation Rule that is a composite function of a Notation Syntax Axiom, plus
 any number of Nulls Permitted and Type Conversion Axioms; so when Earley is
 done, a fair amount of work still needs to happen to generate the output
 Parse tree/RPN for that match! It would definitely be feasible to revert the
 EarleyParse code to handle nulls and type conversions but extra invocations
 of Predictor and Completor are needed, as described in
 "Practical Techniques..." (see below) AND that still leaves the problem of
 how to generate an unambiguous grammar from a database like set.mm that
 contains "removable" or "non-essential ambiguities" such as overloaded
 functions.
 <p>
 The output of EarleyParser is an array of ParseTrees, and there is no
 arbitrary limit on the number of these trees in the event of ambiguity --
 except that imposed by the user in establishing the parseTreeArray. The
 sequence of the output trees *is* arbitrary however (I have no clue), but
 there are solid reasons to believe that duplicate trees will never be
 generated, under any circumstances.
 <p>
 The Earley Parse algorithm write-up talks incessantly about Item Sets. These
 are supposed to be actual *sets*, with no duplications in any one set. To
 accomplish that efficiently in Java was a coding issue. Instead of deleting
 duplicates after they are generated, I attempt to prevent generation of
 duplicate Earley Items in the first place using the pPredictorTyp and
 pBringForwardTyp arrays. And instead of coding the Item Sets as Java Sets I
 used arrays, pre-allocated for speed. The concession to quality is that I do
 do a duplicate check when adding an item to the pCompletedItem array -- no
 duplicates in that array means no duplicate Parse Trees, end of story
 (assuming the "build Parse Tree" logic isn't buggy.)
 <p>
 EarleyParser is my 3rd attempt at coding a parser capable of handling
 Metamath's set.mm database. BottomUpParser was my second attempt. Set.mm's
 "supeu" was too hairy for Bottom Up, but the algorithm does work -- when it
 actually gets around to computing an answer. My first attempt handled
 propositional logic just fine but died deep into set.mm and has since been
 deleted (not even a backup lives on...)
 <p>
 The nice thing about the Earley Parse algorithm is that it does handle all
 context free grammars and it does handle ambiguous grammars. If it works for
 set.mm then it is a helluva parser, because set.mm gives professional
 logicians gray hair with its intricate syntax!
 <p>
 See Dick Grune and Ceriel J.H. Jacob's "Parsing Techniques -- A Practical
 Guide", page 149 in Edition 1 -- which is the 139th page in the .pdf book
 file, available at:
 <p>
 <a href="http://www.cs.vu.nl/%7Edick/PTAPG.html"> Parsing Techniques -- A
 Practical Guide</a>
 <p>
 (Note: I went completely bald after working on this project. Fortunately,
 Dick Grune was incredibly friendly and helped me to understand some gnarly
 concepts. My hair may return, we shall see! While we're on the subject of
 heroes, Norm Megill has the patience of a saint. As far as I am concerned he
 is a prime candidate for the Nobel Prize. One day they will build statues of
 Norman Megill, and small boys will go to bed with Metamath bubble gum trading
 cards under their pillows...
 <p>
 <a href="../../EarleyParseFunctionAlgorithm.html">More on the Earley Parse
 Function Algorithm</a></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(mmj.verify.Grammar,int)" class="member-name-link">EarleyParser</a><wbr>(<a href="Grammar.html" title="class in mmj.verify">Grammar</a>&nbsp;grammarIn,
 int&nbsp;maxFormulaLengthIn)</code></div>
<div class="col-last even-row-color">
<div class="block">Construct using reference to Grammar and a parameter signifying the
 maximum length of a formula in the database.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#parseExpr(mmj.lang.ParseTree%5B%5D,mmj.lang.Cnst,mmj.lang.ParseNodeHolder%5B%5D,int)" class="member-name-link">parseExpr</a><wbr>(<a href="../lang/ParseTree.html" title="class in mmj.lang">ParseTree</a>[]&nbsp;parseTreeArrayIn,
 <a href="../lang/Cnst.html" title="class in mmj.lang">Cnst</a>&nbsp;formulaTypIn,
 <a href="../lang/ParseNodeHolder.html" title="class in mmj.lang">ParseNodeHolder</a>[]&nbsp;parseNodeHolderExprIn,
 int&nbsp;highestSeqIn)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">parseExpr - returns 'n' = the number of ParseTree objects generated for
 the input formula and stored in parseTreeArray.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-mmj.verify.GrammaticalParser">Methods inherited from interface&nbsp;mmj.verify.<a href="GrammaticalParser.html" title="interface in mmj.verify">GrammaticalParser</a></h3>
<code><a href="GrammaticalParser.html#addSettings(mmj.pa.SessionStore)">addSettings</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(mmj.verify.Grammar,int)">
<h3>EarleyParser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EarleyParser</span><wbr><span class="parameters">(<a href="Grammar.html" title="class in mmj.verify">Grammar</a>&nbsp;grammarIn,
 int&nbsp;maxFormulaLengthIn)</span></div>
<div class="block">Construct using reference to Grammar and a parameter signifying the
 maximum length of a formula in the database.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>grammarIn</code> - Grammar object</dd>
<dd><code>maxFormulaLengthIn</code> - gives us a hint about what to expect.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="parseExpr(mmj.lang.ParseTree[],mmj.lang.Cnst,mmj.lang.ParseNodeHolder[],int)">
<h3>parseExpr</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">parseExpr</span><wbr><span class="parameters">(<a href="../lang/ParseTree.html" title="class in mmj.lang">ParseTree</a>[]&nbsp;parseTreeArrayIn,
 <a href="../lang/Cnst.html" title="class in mmj.lang">Cnst</a>&nbsp;formulaTypIn,
 <a href="../lang/ParseNodeHolder.html" title="class in mmj.lang">ParseNodeHolder</a>[]&nbsp;parseNodeHolderExprIn,
 int&nbsp;highestSeqIn)</span>
              throws <span class="exceptions"><a href="VerifyException.html" title="class in mmj.verify">VerifyException</a></span></div>
<div class="block">parseExpr - returns 'n' = the number of ParseTree objects generated for
 the input formula and stored in parseTreeArray.
 <p>
 The user can control whether or not the first successful parse is
 returned by passing in an array of length = 1.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="GrammaticalParser.html#parseExpr(mmj.lang.ParseTree%5B%5D,mmj.lang.Cnst,mmj.lang.ParseNodeHolder%5B%5D,int)">parseExpr</a></code>&nbsp;in interface&nbsp;<code><a href="GrammaticalParser.html" title="interface in mmj.verify">GrammaticalParser</a></code></dd>
<dt>Parameters:</dt>
<dd><code>parseTreeArrayIn</code> - holds generated ParseTrees, therefore, length
            must be greater than 0. The user can control whether or not
            the first successful parse is returned by passing in an array
            of length = 1. If the array length is greater than 1 the
            function attempts to fill the array with alternate parses
            (which if found, would indicate grammatical ambiguity.)
            Returned ParseTree objects are stored in array order -- 0, 1,
            2, ... -- and the contents of unused array entries is
            unspecified. If more than one ParseTree is returned, the
            returned ParseTrees are guaranteed to be different (no
            duplicate ParseTrees are returned!)</dd>
<dd><code>formulaTypIn</code> - Cnst Type Code of the Formula to be parsed.</dd>
<dd><code>parseNodeHolderExprIn</code> - Formula's Expression, preloaded into a
            ParseNodeHolder[] (see
            Formula(dot)getParseNodeHolderExpr(mandVarHypArray).</dd>
<dd><code>highestSeqIn</code> - restricts the parse to statements with a sequence
            number less than or equal to highestSeq. Set this to
            Integer(dot)MAX_VALUE to enable grammatical parsing using all
            available rules.</dd>
<dt>Returns:</dt>
<dd>int specifies the number of ParseTree objects stored into
         parseTreeArray; a number greater than 1 indicates grammatical
         ambiguity, by definition, since there is more than one way to
         parse the formula.</dd>
<dt>Throws:</dt>
<dd><code><a href="VerifyException.html" title="class in mmj.verify">VerifyException</a></code> - if an error occurred</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
